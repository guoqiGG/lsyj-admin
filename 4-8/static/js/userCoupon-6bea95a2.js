var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o,t=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&u(e,r,t[r]);if(l)for(var r of l(t))o.call(t,r)&&u(e,r,t[r]);return e};import{_ as r,L as s}from"./index-d3c82361.js";import{a as d,u as p}from"./vue-router-3b718848.js";import{f as n,j as m,$ as i,a8 as c,o as b,c as f,V as v,O as g,F as j,P as _,M as y,T as h,U as w,S as V,u as I,a as z}from"./@vue-476d9f53.js";import"./dayjs-43ef48e6.js";import"./@kangc-16b25a8c.js";import"./vue-3198b1a1.js";import"./axios-f45f83e3.js";import"./element-plus-520742f9.js";import"./lodash-es-b6050654.js";import"./@vueuse-53812618.js";import"./@element-plus-b1a64a18.js";import"./@ctrl-eb0b847c.js";import"./async-validator-1193b133.js";import"./memoize-one-99e54574.js";import"./escape-html-4bbaf1e1.js";import"./normalize-wheel-es-eea50788.js";import"./@floating-ui-a9dc73ab.js";import"./echarts-ed669956.js";import"./zrender-93d325f0.js";import"./vuex-9b0668b4.js";import"./js-base64-8ead6284.js";import"./vuex-persistedstate-1d34ce44.js";import"./screenfull-c3c7916b.js";import"./nprogress-fdca1b68.js";const S=h("查询"),C=h("重置"),N=["onClick"],x={class:"pagination"};var U=r({setup(e){const l=d(),a=p(),o={tel:null,userName:null,couponName:null,orderId:null,type:null,status:null,userId:null},u=n(!1),r=n(t({},o)),U=n({pageNo:1,pageSize:20}),k=n(0);let O=n([]);const q=async()=>{u.value=!0;const e=await s(t(t({},r.value),U.value));u.value=!1,O.value=e.data.list,k.value=e.data.total},P=e=>{U.value.pageSize=e,q()},L=e=>{U.value.pageNo=e,q()};return m((()=>{l.query.userId&&(r.value.userId=l.query.userId),q()})),(e,l)=>{const s=i("el-input"),d=i("el-form-item"),p=i("el-col"),n=i("el-option"),m=i("el-select"),M=i("el-button"),T=i("el-row"),E=i("el-form"),F=i("el-card"),$=i("el-table-column"),A=i("el-table"),B=i("el-pagination"),D=c("loading");return b(),f(j,null,[v(F,null,{default:g((()=>[v(E,{inline:!0,model:r.value,class:"demo-form-inline","lable-width":"100px"},{default:g((()=>[v(T,null,{default:g((()=>[v(p,{lg:6,md:8,sm:12},{default:g((()=>[v(d,{label:"用户昵称"},{default:g((()=>[v(s,{modelValue:r.value.userName,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value.userName=e),placeholder:"用户昵称",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),v(p,{lg:6,md:8,sm:12},{default:g((()=>[v(d,{label:"用户手机"},{default:g((()=>[v(s,{modelValue:r.value.tel,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value.tel=e),placeholder:"用户手机",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),v(p,{lg:6,md:8,sm:12},{default:g((()=>[v(d,{label:"优惠券名"},{default:g((()=>[v(s,{modelValue:r.value.couponName,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value.couponName=e),placeholder:"优惠券名",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),v(p,{lg:6,md:8,sm:12},{default:g((()=>[v(d,{label:"订单编号"},{default:g((()=>[v(s,{modelValue:r.value.orderId,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value.orderId=e),placeholder:"订单编号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),v(p,{lg:6,md:8,sm:12},{default:g((()=>[v(d,{label:"类型"},{default:g((()=>[v(m,{modelValue:r.value.type,"onUpdate:modelValue":l[4]||(l[4]=e=>r.value.type=e),placeholder:"请选择",clearable:""},{default:g((()=>[v(n,{label:"下单送的优惠券",value:"0"}),v(n,{label:"系统补发的优惠券",value:"1"}),v(n,{label:"系统延迟发放的优惠券",value:"2"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),v(p,{lg:6,md:8,sm:12},{default:g((()=>[v(d,{label:"状态"},{default:g((()=>[v(m,{modelValue:r.value.status,"onUpdate:modelValue":l[5]||(l[5]=e=>r.value.status=e),placeholder:"请选择",clearable:""},{default:g((()=>[v(n,{label:"未使用",value:"0"}),v(n,{label:"已使用",value:"1"}),v(n,{label:"已过期",value:"2"}),v(n,{label:"已回收",value:"3"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),v(d,null,{default:g((()=>[v(M,{type:"primary",onClick:q},{default:g((()=>[S])),_:1}),v(M,{onClick:l[6]||(l[6]=e=>(r.value=t({},o),void q()))},{default:g((()=>[C])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),v(F,{style:{"margin-top":"10px"}},{default:g((()=>[_((b(),y(A,{data:I(O),style:{width:"100%"},class:"add_dialog","header-cell-style":{background:"#f7f8fa",color:"#000"}},{default:g((()=>[v($,{prop:"userName",label:"用户昵称"}),v($,{prop:"userMobile",label:"手机号"}),v($,{prop:"couponName",label:"优惠券名称"}),v($,{label:"优惠券状态"},{default:g((e=>[h(w("1"==e.row.couponStatus?"上架":"下架"),1)])),_:1}),v($,{label:"获得类型"},{default:g((e=>[h(w(0==e.row.type?"下单":1==e.row.type?"后台补发":"系统延迟发放"),1)])),_:1}),v($,{prop:"createTime",label:"获得时间"}),v($,{label:"使用状态"},{default:g((e=>[h(w(0==e.row.userCouponStatus?"未使用":1==e.row.userCouponStatus?"已使用":2==e.row.userCouponStatus?"已过期":"已回收"),1)])),_:1}),v($,{prop:"sourceId",label:"来源(下单赠送等)"}),v($,{prop:"orderId",label:"使用后对应的订单号"}),v($,{fixed:"right",label:"操作",width:"180",align:"center"},{default:g((e=>[e.row.orderId&&1==e.row.userCouponStatus?(b(),f("span",{key:0,class:"operation",style:{cursor:"pointer"},onClick:l=>{return o=e.row.orderId,u=e.row.userCouponStatus,void(o&&1==u&&a.push({path:"/orderList",query:{orderId:"qc240314592980001"}}));var o,u}},"使用详情",8,N)):V("",!0)])),_:1})])),_:1},8,["data"])),[[D,u.value]]),z("div",x,[v(B,{background:"",layout:"total, sizes, prev, pager, next, jumper","page-size":U.value.pageSize,"onUpdate:page-size":l[7]||(l[7]=e=>U.value.pageSize=e),"current-page":U.value.pageNo,"onUpdate:current-page":l[8]||(l[8]=e=>U.value.pageNo=e),"page-sizes":[10,20,50,100,200,500],total:k.value,onSizeChange:P,onCurrentChange:L},null,8,["page-size","current-page","total"])])])),_:1})],64)}}},[["__scopeId","data-v-2731d9f6"]]);export{U as default};
